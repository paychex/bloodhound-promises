!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).Bloodhound=r()}(this,function(){"use strict";var t,yn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};return function(t,r){t.exports=function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function u(t){return function(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=void 0!==yn?yn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=Object.prototype.hasOwnProperty;var i=function(t,r){return null!=t&&e.call(t,r)},l=Array.isArray,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==yn?yn:"undefined"!=typeof self?self:{};function c(t,r){return t(r={exports:{}},r.exports),r.exports}var a="object"==n(r)&&r&&r.Object===Object&&r,f="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,s=a||f||Function("return this")(),p=s.Symbol,v=Object.prototype,y=v.hasOwnProperty,h=v.toString,d=p?p.toStringTag:void 0;var b=function(t){var r=y.call(t,d),e=t[d];try{var n=!(t[d]=void 0)}catch(t){}var o=h.call(t);n&&(r?t[d]=e:delete t[d]);return o},j=Object.prototype.toString;var g=function(t){return j.call(t)},m=p?p.toStringTag:void 0;var _=function(t){return null!=t?m&&m in Object(t)?b(t):g(t):void 0===t?"[object Undefined]":"[object Null]"};var w=function(t){return null!=t&&"object"==n(t)};var O=function(t){return"symbol"==n(t)||w(t)&&"[object Symbol]"==_(t)},S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;var x=function(t,r){if(l(t))return!1;var e=n(t);if("number"==e||"symbol"==e||"boolean"==e||null==t||O(t))return!0;return A.test(t)||!S.test(t)||null!=r&&t in Object(r)};var E=function(t){var r=n(t);return null!=t&&("object"==r||"function"==r)};var P=function(t){if(!E(t))return!1;var r=_(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},T=s["__core-js_shared__"],z=function(){var t=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var F=function(t){return!!z&&z in t},M=Function.prototype.toString;var R=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},B=/^\[object .+?Constructor\]$/,$=Function.prototype,k=Object.prototype,I=$.toString,C=k.hasOwnProperty,D=RegExp("^"+I.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var U=function(t){return!(!E(t)||F(t))&&(P(t)?D:B).test(R(t))};var V=function(t,r){return null==t?void 0:t[r]};var N=function(t,r){var e=V(t,r);return U(e)?e:void 0},L=N(Object,"create");var W=function(){this.__data__=L?L(null):{},this.size=0};var q=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},G=Object.prototype.hasOwnProperty;var H=function(t){var r=this.__data__;if(L){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return G.call(r,t)?r[t]:void 0},J=Object.prototype.hasOwnProperty;var K=function(t){var r=this.__data__;return L?void 0!==r[t]:J.call(r,t)};var Q=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=L&&void 0===r?"__lodash_hash_undefined__":r,this};function X(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}X.prototype.clear=W,X.prototype.delete=q,X.prototype.get=H,X.prototype.has=K,X.prototype.set=Q;var Y=X;var Z=function(){this.__data__=[],this.size=0};var tt=function(t,r){return t===r||t!=t&&r!=r};var rt=function(t,r){var e=t.length;for(;e--;)if(tt(t[e][0],r))return e;return-1},et=Array.prototype.splice;var nt=function(t){var r=this.__data__,e=rt(r,t);if(e<0)return!1;var n=r.length-1;e==n?r.pop():et.call(r,e,1);return--this.size,!0};var ot=function(t){var r=this.__data__,e=rt(r,t);return e<0?void 0:r[e][1]};var ut=function(t){return-1<rt(this.__data__,t)};var it=function(t,r){var e=this.__data__,n=rt(e,t);n<0?(++this.size,e.push([t,r])):e[n][1]=r;return this};function ct(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ct.prototype.clear=Z,ct.prototype.delete=nt,ct.prototype.get=ot,ct.prototype.has=ut,ct.prototype.set=it;var at=ct,ft=N(s,"Map");var lt=function(t){var r=n(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var st=function(t,r){var e=t.__data__;return lt(r)?e["string"==typeof r?"string":"hash"]:e.map};var pt=function(t){var r=st(this,t).delete(t);return this.size-=r?1:0,r};var vt=function(t){return st(this,t).get(t)};var yt=function(t){return st(this,t).has(t)};var ht=function(t,r){var e=st(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function dt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}dt.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(ft||at),string:new Y}},dt.prototype.delete=pt,dt.prototype.get=vt,dt.prototype.has=yt,dt.prototype.set=ht;var bt=dt,jt="Expected a function";function gt(u,i){if("function"!=typeof u||null!=i&&"function"!=typeof i)throw new TypeError(jt);var t=function t(){var r=arguments,e=i?i.apply(this,r):r[0],n=t.cache;if(n.has(e))return n.get(e);var o=u.apply(this,r);return t.cache=n.set(e,o)||n,o};return t.cache=new(gt.Cache||bt),t}gt.Cache=bt;var mt=gt;var _t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wt=/\\(\\)?/g,Ot=function(t){var r=mt(t,function(t){return 500===e.size&&e.clear(),t}),e=r.cache;return r}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(_t,function(t,r,e,n){o.push(e?n.replace(wt,"$1"):r||t)}),o});var St=function(t,r){var e=-1,n=null==t?0:t.length,o=Array(n);for(;++e<n;)o[e]=r(t[e],e,t);return o},At=1/0,xt=p?p.prototype:void 0,Et=xt?xt.toString:void 0;var Pt=function t(r){if("string"==typeof r)return r;if(l(r))return St(r,t)+"";if(O(r))return Et?Et.call(r):"";var e=r+"";return"0"==e&&1/r==-At?"-0":e};var Tt=function(t){return null==t?"":Pt(t)};var zt=function(t,r){if(l(t))return t;return x(t,r)?[t]:Ot(Tt(t))};var Ft=function(t){return w(t)&&"[object Arguments]"==_(t)},Mt=Object.prototype,Rt=Mt.hasOwnProperty,Bt=Mt.propertyIsEnumerable,$t=Ft(function(){return arguments}())?Ft:function(t){return w(t)&&Rt.call(t,"callee")&&!Bt.call(t,"callee")},kt=/^(?:0|[1-9]\d*)$/;var It=function(t,r){var e=n(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&kt.test(t))&&-1<t&&t%1==0&&t<r};var Ct=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var Dt=function(t){if("string"==typeof t||O(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var Ut=function(t,r,e){r=zt(r,t);var n=-1,o=r.length,u=!1;for(;++n<o;){var i=Dt(r[n]);if(!(u=null!=t&&e(t,i)))break;t=t[i]}if(u||++n!=o)return u;return!!(o=null==t?0:t.length)&&Ct(o)&&It(i,o)&&(l(t)||$t(t))};var Vt=function(t,r){return null!=t&&Ut(t,r,i)};var Nt=function(){},Lt=Object.prototype;var Wt=function(t){var r=t&&t.constructor,e="function"==typeof r&&r.prototype||Lt;return t===e};var qt=function(r,e){return function(t){return r(e(t))}},Gt=qt(Object.keys,Object),Ht=Object.prototype.hasOwnProperty;var Jt=function(t){if(!Wt(t))return Gt(t);var r=[];for(var e in Object(t))Ht.call(t,e)&&"constructor"!=e&&r.push(e);return r},Kt=N(s,"DataView"),Qt=N(s,"Promise"),Xt=N(s,"Set"),Yt=N(s,"WeakMap"),Zt="[object Map]",tr="[object Promise]",rr="[object Set]",er="[object WeakMap]",nr="[object DataView]",or=R(Kt),ur=R(ft),ir=R(Qt),cr=R(Xt),ar=R(Yt),fr=_;(Kt&&fr(new Kt(new ArrayBuffer(1)))!=nr||ft&&fr(new ft)!=Zt||Qt&&fr(Qt.resolve())!=tr||Xt&&fr(new Xt)!=rr||Yt&&fr(new Yt)!=er)&&(fr=function(t){var r=_(t),e="[object Object]"==r?t.constructor:void 0,n=e?R(e):"";if(n)switch(n){case or:return nr;case ur:return Zt;case ir:return tr;case cr:return rr;case ar:return er}return r});var lr=fr;var sr=function(t){return null!=t&&Ct(t.length)&&!P(t)};var pr=function(t){return"string"==typeof t||!l(t)&&w(t)&&"[object String]"==_(t)};var vr=function(r){return function(t){return null==t?void 0:t[r]}}("length"),yr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var hr=function(t){return yr.test(t)},dr="\\ud800-\\udfff",br="["+dr+"]",jr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",gr="\\ud83c[\\udffb-\\udfff]",mr="[^"+dr+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="(?:"+jr+"|"+gr+")?",Sr="[\\ufe0e\\ufe0f]?",Ar="(?:\\u200d(?:"+[mr,_r,wr].join("|")+")"+Sr+Or+")*",xr=Sr+Or+Ar,Er="(?:"+[mr+jr+"?",jr,_r,wr,br].join("|")+")",Pr=RegExp(gr+"(?="+gr+")|"+Er+xr,"g");var Tr=function(t){var r=Pr.lastIndex=0;for(;Pr.test(t);)++r;return r};var zr=function(t){return hr(t)?Tr(t):vr(t)};var Fr=function(t){if(null==t)return 0;if(sr(t))return pr(t)?zr(t):t.length;var r=lr(t);return"[object Map]"!=r&&"[object Set]"!=r?Jt(t).length:t.size};var Mr=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)};var Rr=function(t){var r=null==t?0:t.length;return r?t[r-1]:void 0};var Br=function(t,r){r=zt(r,t);var e=0,n=r.length;for(;null!=t&&e<n;)t=t[Dt(r[e++])];return e&&e==n?t:void 0};var $r=function(t,r,e){var n=-1,o=t.length;r<0&&(r=o<-r?0:o+r);(e=o<e?o:e)<0&&(e+=o);o=e<r?0:e-r>>>0,r>>>=0;var u=Array(o);for(;++n<o;)u[n]=t[n+r];return u};var kr=function(t,r){return r.length<2?t:Br(t,$r(r,0,-1))};var Ir=function(t,r,e){r=zt(r,t);var n=null==(t=kr(t,r))?t:t[Dt(Rr(r))];return null==n?void 0:Mr(n,t,e)};var Cr=function(t){return t},Dr=Math.max;var Ur=function(u,i,c){return i=Dr(void 0===i?u.length-1:i,0),function(){for(var t=arguments,r=-1,e=Dr(t.length-i,0),n=Array(e);++r<e;)n[r]=t[i+r];r=-1;for(var o=Array(i+1);++r<i;)o[r]=t[r];return o[i]=c(n),Mr(u,this,o)}};var Vr=function(t){return function(){return t}},Nr=function(){try{var t=N(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Lr=Nr?function(t,r){return Nr(t,"toString",{configurable:!0,enumerable:!1,value:Vr(r),writable:!0})}:Cr,Wr=Date.now;var qr=function(e){var n=0,o=0;return function(){var t=Wr(),r=16-(t-o);if(o=t,0<r){if(800<=++n)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(Lr);var Gr=function(t,r){return qr(Ur(t,r,Cr),t+"")},Hr=Gr(Ir),Jr=qt(Object.getPrototypeOf,Object),Kr=Function.prototype,Qr=Object.prototype,Xr=Kr.toString,Yr=Qr.hasOwnProperty,Zr=Xr.call(Object);var te=function(t){if(!w(t)||"[object Object]"!=_(t))return!1;var r=Jr(t);if(null===r)return!0;var e=Yr.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&Xr.call(e)==Zr};var re=function(t){if(!w(t))return!1;var r=_(t);return"[object Error]"==r||"[object DOMException]"==r||"string"==typeof t.message&&"string"==typeof t.name&&!te(t)},ee=Gr(function(t,r){try{return Mr(t,void 0,r)}catch(t){return re(t)?t:new Error(t)}});var ne=function(t,r){var e=-1,n=r.length,o=t.length;for(;++e<n;)t[o+e]=r[e];return t},oe=p?p.isConcatSpreadable:void 0;var ue=function(t){return l(t)||$t(t)||!!(oe&&t&&t[oe])};var ie=function t(r,e,n,o,u){var i=-1,c=r.length;n=n||ue;u=u||[];for(;++i<c;){var a=r[i];0<e&&n(a)?1<e?t(a,e-1,n,o,u):ne(u,a):o||(u[u.length]=a)}return u};var ce=function(t){return null!=t&&t.length?ie(t,1):[]};var ae=function(t,r){var e=-1,n=null==t?0:t.length;for(;++e<n&&!1!==r(t[e],e,t););return t};var fe=function(a){return function(t,r,e){for(var n=-1,o=Object(t),u=e(t),i=u.length;i--;){var c=u[a?i:++n];if(!1===r(o[c],c,o))break}return t}}();var le=function(t,r){var e=-1,n=Array(t);for(;++e<t;)n[e]=r(e);return n};var se=function(){return!1},pe=c(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e,u=o?s.Buffer:void 0,i=u?u.isBuffer:void 0,c=i||se;t.exports=c}),ve={};ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Arguments]"]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object Boolean]"]=ve["[object DataView]"]=ve["[object Date]"]=ve["[object Error]"]=ve["[object Function]"]=ve["[object Map]"]=ve["[object Number]"]=ve["[object Object]"]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object WeakMap]"]=!1;var ye=function(t){return w(t)&&Ct(t.length)&&!!ve[_(t)]};var he=function(r){return function(t){return r(t)}},de=c(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e,u=o&&a.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=i}),be=de&&de.isTypedArray,je=be?he(be):ye,ge=Object.prototype.hasOwnProperty;var me=function(t,r){var e=l(t),n=!e&&$t(t),o=!e&&!n&&pe(t),u=!e&&!n&&!o&&je(t),i=e||n||o||u,c=i?le(t.length,String):[],a=c.length;for(var f in t)!r&&!ge.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||It(f,a))||c.push(f);return c};var _e=function(t){return sr(t)?me(t):Jt(t)};var we=function(u,i){return function(t,r){if(null==t)return t;if(!sr(t))return u(t,r);for(var e=t.length,n=i?e:-1,o=Object(t);(i?n--:++n<e)&&!1!==r(o[n],n,o););return t}}(function(t,r){return t&&fe(t,r,_e)});var Oe=function(t){return"function"==typeof t?t:Cr};var Se=function(t,r){return(l(t)?ae:we)(t,Oe(r))};var Ae=function(t){return w(t)&&"[object Map]"==lr(t)},xe=de&&de.isMap,Ee=xe?he(xe):Ae,Pe=Object.prototype.hasOwnProperty;var Te=function(t){if(null==t)return!0;if(sr(t)&&(l(t)||"string"==typeof t||"function"==typeof t.splice||pe(t)||je(t)||$t(t)))return!t.length;var r=lr(t);if("[object Map]"==r||"[object Set]"==r)return!t.size;if(Wt(t))return!Jt(t).length;for(var e in t)if(Pe.call(t,e))return!1;return!0};var ze=function(t,r){var e=-1,n=t.length;r=r||Array(n);for(;++e<n;)r[e]=t[e];return r};var Fe=function(t){var r,e=[];for(;!(r=t.next()).done;)e.push(r.value);return e};var Me=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Re=function(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e};var Be=function(t){return t.split("")},$e="\\ud800-\\udfff",ke="["+$e+"]",Ie="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ce="\\ud83c[\\udffb-\\udfff]",De="[^"+$e+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="(?:"+Ie+"|"+Ce+")?",Le="[\\ufe0e\\ufe0f]?",We="(?:\\u200d(?:"+[De,Ue,Ve].join("|")+")"+Le+Ne+")*",qe=Le+Ne+We,Ge="(?:"+[De+Ie+"?",Ie,Ue,Ve,ke].join("|")+")",He=RegExp(Ce+"(?="+Ce+")|"+Ge+qe,"g");var Je=function(t){return t.match(He)||[]};var Ke=function(t){return hr(t)?Je(t):Be(t)};var Qe=function(r,t){return St(t,function(t){return r[t]})};var Xe=function(t){return null==t?[]:Qe(t,_e(t))},Ye=p?p.iterator:void 0;var Ze=function(t){if(!t)return[];if(sr(t))return pr(t)?Ke(t):ze(t);if(Ye&&t[Ye])return Fe(t[Ye]());var r=lr(t);return("[object Map]"==r?Me:"[object Set]"==r?Re:Xe)(t)},tn=[Hr(t,"Symbol","STATE"),"_state"].find(Boolean),rn=[Hr(t,"Symbol","_value"),"_value"].find(Boolean),en=[Hr(t,"Symbol","SETTLED"),"_settled"].find(Boolean),nn=function(t){return{enumerable:!1,get:Vr(t)}};function on(t){Vt(t,en)||Object.defineProperty(t,en,{value:[],configurable:!0})}function un(t){return pr(t)?t:t.name}function cn(t){return!!t&&(pr(t)||t===Error||re(t.prototype))}function an(t){return(this===Error||re(this))&&(this.name===t||an.call(Object.getPrototypeOf(this.constructor),t))}function fn(t){return t&&!pr(t)&&P(t[Symbol.iterator])}function ln(t){return t(this)}function sn(t,r,e){var n=ce([r]);if(!n.some(ln,t))throw new TypeError(e)}function pn(t,r,e){var n;Vt(t,tn)||(Object.defineProperties(t,(o(n={},rn,nn(e)),o(n,tn,nn(r)),n)),Se(t[en],ee),delete t[en])}function vn(t,r,e,n){n===t?e(new TypeError("Can't resolve promise with itself.")):re(n)?e(n):E(n)?function(r,e,n,t){var o=!1;try{var u=function(t){if(o)return;o=true,vn(r,e,n,t)},i=function(t){if(o)return;o=true,n(t)},c=t.then;if(!P(c))return e(t);c.call(t,u,i)}catch(t){o||n(t)}}(t,r,e,n):r(n)}return function(t){function r(t){return t()}var l=Nt,e=function(t){throw t},s=new t(r);function p(u){var i=this;new t(function(r,e){function n(t){pn(i,1,t),r(t)}function o(t){pn(i,2,t),e(t)}function t(t){vn(i,n,o,t)}try{u.call(this,t,o,Nt)}catch(t){o(t)}}).catch(Nt)}return p.resolve=function(r){return new p(function(t){return t(r)})},p.reject=function(e){return new p(function(t,r){return r(e)})},p.defer=function(){var n={};return n.promise=new p(function(t,r,e){n.reject=r,n.resolve=t,Object.defineProperty(n,"notify",{value:e})}),n},p.timeout=function(t,r,e){var n=p.defer();return t.then(n.resolve,n.reject),setTimeout(n.reject,r,e||new Error("Promise timed out.")),n.promise},p.apply=p.fapply=function(r,e){return sn(r,P,"Function argument expected."),new p(function(t){return t(r.apply(void 0,u(e)))})},p.call=p.fcall=p.try=p.attempt=function(t){var r=Array.prototype.slice.call(arguments,1);return p.apply(t,r)},p.cast=p.when=function(t){return p.resolve(t)},p.isPromise=p.isPromiseLike=function(t){return Boolean(t instanceof p||t&&P(t.then))},p.race=t.race,p.delay=function(t,r){var e=p.defer();return setTimeout(e.resolve,t,r),e.promise},p.hash=p.settle=p.allSettled=function(t){sn(t,[E,Ee,fn],"Object or Iterable argument expected.");var u=Fr(t),i=p.defer(),c=fn(t)?[]:{};return Te(t)?p.resolve(c):(Se(t,function(t,r){var e,n,o=p.cast(t);o.finally((e=r,n=o,function(){c[e]=n,0==--u&&i.resolve(c)}))}),i.promise)},p.some=function(t,n){sn(t,[E,Ee,fn],"Object or Iterable argument expected."),sn(n,Ct,"Non-negative number argument expected.");var o=0,u=0,i=[],c=Fr(t),a=p.defer(),f=fn(t)?[]:{};function e(r,e){return function(t){e||re(t)?(u++,i[i.length]=t):(o++,f[r]=t),n<=o?a.resolve(f):c-n<u&&a.reject(1===u?i[0]:i)}}return c<n||0===n?n===c?p.resolve(f):p.reject(new Error("Expected number of promises not provided.")):(Se(t,function(t,r){p.cast(t).then(e(r,!1),e(r,!0))}),a.promise)},p.all=function(t){return p.some(t,Fr(t))},p.any=function(t){return p.some(t,1)},p.unwrap=function(){return t},(p.config=Object.create(null)).setErrorHandler=function(t){sn(t,P,"Function argument expected."),e=t},p.config.setAsyncNotifier=function(t){sn(t,P,"Function argument expected."),l=t},((p.prototype=new t(r)).constructor=p).prototype.value=p.prototype.getValue=function(){return this[rn]},p.prototype.isResolved=function(){return 1===this[tn]},p.prototype.isRejected=function(){return 2===this[tn]},p.prototype.isSettled=function(){return this.isResolved()||this.isRejected()},p.prototype.notify=function(){return p.resolve(this)},p.prototype.done=function(r){this.then(r,function(t){ee(r,t),setTimeout(e,0,t)})},p.prototype.timeout=function(t,r){return p.timeout(this,t,r)},p.prototype.then=function(c,a){var f=this;return new p(function(t,r){var e,n,o,u=f,i=(e=function(){s.then(l);var t=u.getValue();if(u.isResolved())return P(c)?c(t):t;if(P(a))return a(t);throw t},n=t,o=r,function(){return s.then(function(){return n(e())}).catch(o)});u.isSettled()?i():(on(u),u[en].push(i))})},p.prototype.else=p.prototype.catch=function(){var t=ce(Ze(arguments)),r=t.filter(cn).map(un),e=t.reverse().find(P)||Nt;return this.then(null,function(t){if(Te(r)||r.some(an,t))return e(t);throw t})},p.prototype.tap=function(e){return P(e)?this.then(function(t){var r=Vr(t);return p.call(e,t).then(r,r)}):p.resolve(this)},p.prototype.spread=function(r){return P(r)?this.then(function(t){return fn(t)?r.apply(void 0,u(t)):r.apply(void 0,arguments)}):p.resolve(this)},p.prototype.lastly=p.prototype.finally=function(r){function t(t){return p.call(r,t).then(Vr(t))}return P(r)?this.then(t,t):p.resolve(this)},p.prototype.unwrap=function(){var e=this;return new t(function(t,r){return e.then(t,r)})},p}}()}(t={exports:{}},t.exports),t.exports});
