!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).Bloodhound=r()}(this,function(){"use strict";var t,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};return function(t,r){t.exports=function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function u(t){return function(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=void 0!==cn?cn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=Object.prototype.hasOwnProperty;var i=function(t,r){return null!=t&&e.call(t,r)},l=Array.isArray,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==cn?cn:"undefined"!=typeof self?self:{};function c(t,r){return t(r={exports:{}},r.exports),r.exports}var a="object"==n(r)&&r&&r.Object===Object&&r,f="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,s=a||f||Function("return this")(),p=s.Symbol,v=Object.prototype,y=v.hasOwnProperty,h=v.toString,d=p?p.toStringTag:void 0;var b=function(t){var r=y.call(t,d),e=t[d];try{var n=!(t[d]=void 0)}catch(t){}var o=h.call(t);n&&(r?t[d]=e:delete t[d]);return o},j=Object.prototype.toString;var g=function(t){return j.call(t)},m=p?p.toStringTag:void 0;var _=function(t){return null!=t?m&&m in Object(t)?b(t):g(t):void 0===t?"[object Undefined]":"[object Null]"};var w=function(t){return null!=t&&"object"==n(t)};var O=function(t){return"symbol"==n(t)||w(t)&&"[object Symbol]"==_(t)},S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;var x=function(t,r){if(l(t))return!1;var e=n(t);if("number"==e||"symbol"==e||"boolean"==e||null==t||O(t))return!0;return A.test(t)||!S.test(t)||null!=r&&t in Object(r)};var E=function(t){var r=n(t);return null!=t&&("object"==r||"function"==r)};var P=function(t){if(!E(t))return!1;var r=_(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},T=s["__core-js_shared__"],z=function(){var t=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var F=function(t){return!!z&&z in t},M=Function.prototype.toString;var R=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},$=/^\[object .+?Constructor\]$/,k=Function.prototype,I=Object.prototype,B=k.toString,C=I.hasOwnProperty,D=RegExp("^"+B.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var U=function(t){return!(!E(t)||F(t))&&(P(t)?D:$).test(R(t))};var V=function(t,r){return null==t?void 0:t[r]};var N=function(t,r){var e=V(t,r);return U(e)?e:void 0},L=N(Object,"create");var W=function(){this.__data__=L?L(null):{},this.size=0};var q=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},G=Object.prototype.hasOwnProperty;var H=function(t){var r=this.__data__;if(L){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return G.call(r,t)?r[t]:void 0},J=Object.prototype.hasOwnProperty;var K=function(t){var r=this.__data__;return L?void 0!==r[t]:J.call(r,t)};var Q=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=L&&void 0===r?"__lodash_hash_undefined__":r,this};function X(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}X.prototype.clear=W,X.prototype.delete=q,X.prototype.get=H,X.prototype.has=K,X.prototype.set=Q;var Y=X;var Z=function(){this.__data__=[],this.size=0};var tt=function(t,r){return t===r||t!=t&&r!=r};var rt=function(t,r){var e=t.length;for(;e--;)if(tt(t[e][0],r))return e;return-1},et=Array.prototype.splice;var nt=function(t){var r=this.__data__,e=rt(r,t);if(e<0)return!1;var n=r.length-1;e==n?r.pop():et.call(r,e,1);return--this.size,!0};var ot=function(t){var r=this.__data__,e=rt(r,t);return e<0?void 0:r[e][1]};var ut=function(t){return-1<rt(this.__data__,t)};var it=function(t,r){var e=this.__data__,n=rt(e,t);n<0?(++this.size,e.push([t,r])):e[n][1]=r;return this};function ct(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ct.prototype.clear=Z,ct.prototype.delete=nt,ct.prototype.get=ot,ct.prototype.has=ut,ct.prototype.set=it;var at=ct,ft=N(s,"Map");var lt=function(t){var r=n(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var st=function(t,r){var e=t.__data__;return lt(r)?e["string"==typeof r?"string":"hash"]:e.map};var pt=function(t){var r=st(this,t).delete(t);return this.size-=r?1:0,r};var vt=function(t){return st(this,t).get(t)};var yt=function(t){return st(this,t).has(t)};var ht=function(t,r){var e=st(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function dt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}dt.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(ft||at),string:new Y}},dt.prototype.delete=pt,dt.prototype.get=vt,dt.prototype.has=yt,dt.prototype.set=ht;var bt=dt,jt="Expected a function";function gt(u,i){if("function"!=typeof u||null!=i&&"function"!=typeof i)throw new TypeError(jt);var t=function t(){var r=arguments,e=i?i.apply(this,r):r[0],n=t.cache;if(n.has(e))return n.get(e);var o=u.apply(this,r);return t.cache=n.set(e,o)||n,o};return t.cache=new(gt.Cache||bt),t}gt.Cache=bt;var mt=gt;var _t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wt=/\\(\\)?/g,Ot=function(t){var r=mt(t,function(t){return 500===e.size&&e.clear(),t}),e=r.cache;return r}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(_t,function(t,r,e,n){o.push(e?n.replace(wt,"$1"):r||t)}),o});var St=function(t,r){var e=-1,n=null==t?0:t.length,o=Array(n);for(;++e<n;)o[e]=r(t[e],e,t);return o},At=1/0,xt=p?p.prototype:void 0,Et=xt?xt.toString:void 0;var Pt=function t(r){if("string"==typeof r)return r;if(l(r))return St(r,t)+"";if(O(r))return Et?Et.call(r):"";var e=r+"";return"0"==e&&1/r==-At?"-0":e};var Tt=function(t){return null==t?"":Pt(t)};var zt=function(t,r){if(l(t))return t;return x(t,r)?[t]:Ot(Tt(t))};var Ft=function(t){return w(t)&&"[object Arguments]"==_(t)},Mt=Object.prototype,Rt=Mt.hasOwnProperty,$t=Mt.propertyIsEnumerable,kt=Ft(function(){return arguments}())?Ft:function(t){return w(t)&&Rt.call(t,"callee")&&!$t.call(t,"callee")},It=/^(?:0|[1-9]\d*)$/;var Bt=function(t,r){var e=n(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&It.test(t))&&-1<t&&t%1==0&&t<r};var Ct=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var Dt=function(t){if("string"==typeof t||O(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var Ut=function(t,r,e){r=zt(r,t);var n=-1,o=r.length,u=!1;for(;++n<o;){var i=Dt(r[n]);if(!(u=null!=t&&e(t,i)))break;t=t[i]}if(u||++n!=o)return u;return!!(o=null==t?0:t.length)&&Ct(o)&&Bt(i,o)&&(l(t)||kt(t))};var Vt=function(t,r){return null!=t&&Ut(t,r,i)};var Nt=function(){},Lt=Object.prototype;var Wt=function(t){var r=t&&t.constructor,e="function"==typeof r&&r.prototype||Lt;return t===e};var qt=function(r,e){return function(t){return r(e(t))}},Gt=qt(Object.keys,Object),Ht=Object.prototype.hasOwnProperty;var Jt=function(t){if(!Wt(t))return Gt(t);var r=[];for(var e in Object(t))Ht.call(t,e)&&"constructor"!=e&&r.push(e);return r},Kt=N(s,"DataView"),Qt=N(s,"Promise"),Xt=N(s,"Set"),Yt=N(s,"WeakMap"),Zt="[object Map]",tr="[object Promise]",rr="[object Set]",er="[object WeakMap]",nr="[object DataView]",or=R(Kt),ur=R(ft),ir=R(Qt),cr=R(Xt),ar=R(Yt),fr=_;(Kt&&fr(new Kt(new ArrayBuffer(1)))!=nr||ft&&fr(new ft)!=Zt||Qt&&fr(Qt.resolve())!=tr||Xt&&fr(new Xt)!=rr||Yt&&fr(new Yt)!=er)&&(fr=function(t){var r=_(t),e="[object Object]"==r?t.constructor:void 0,n=e?R(e):"";if(n)switch(n){case or:return nr;case ur:return Zt;case ir:return tr;case cr:return rr;case ar:return er}return r});var lr=fr;var sr=function(t){return null!=t&&Ct(t.length)&&!P(t)};var pr=function(t){return"string"==typeof t||!l(t)&&w(t)&&"[object String]"==_(t)};var vr=function(r){return function(t){return null==t?void 0:t[r]}}("length"),yr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var hr=function(t){return yr.test(t)},dr="\\ud800-\\udfff",br="["+dr+"]",jr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",gr="\\ud83c[\\udffb-\\udfff]",mr="[^"+dr+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="(?:"+jr+"|"+gr+")?",Sr="[\\ufe0e\\ufe0f]?",Ar="(?:\\u200d(?:"+[mr,_r,wr].join("|")+")"+Sr+Or+")*",xr=Sr+Or+Ar,Er="(?:"+[mr+jr+"?",jr,_r,wr,br].join("|")+")",Pr=RegExp(gr+"(?="+gr+")|"+Er+xr,"g");var Tr=function(t){var r=Pr.lastIndex=0;for(;Pr.test(t);)++r;return r};var zr=function(t){return hr(t)?Tr(t):vr(t)};var Fr=function(t){if(null==t)return 0;if(sr(t))return pr(t)?zr(t):t.length;var r=lr(t);return"[object Map]"!=r&&"[object Set]"!=r?Jt(t).length:t.size};var Mr=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)};var Rr=function(t){return t},$r=Math.max;var kr=function(u,i,c){return i=$r(void 0===i?u.length-1:i,0),function(){for(var t=arguments,r=-1,e=$r(t.length-i,0),n=Array(e);++r<e;)n[r]=t[i+r];r=-1;for(var o=Array(i+1);++r<i;)o[r]=t[r];return o[i]=c(n),Mr(u,this,o)}};var Ir=function(t){return function(){return t}},Br=function(){try{var t=N(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Cr=Br?function(t,r){return Br(t,"toString",{configurable:!0,enumerable:!1,value:Ir(r),writable:!0})}:Rr,Dr=Date.now;var Ur=function(e){var n=0,o=0;return function(){var t=Dr(),r=16-(t-o);if(o=t,0<r){if(800<=++n)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(Cr);var Vr=function(t,r){return Ur(kr(t,r,Rr),t+"")},Nr=qt(Object.getPrototypeOf,Object),Lr=Function.prototype,Wr=Object.prototype,qr=Lr.toString,Gr=Wr.hasOwnProperty,Hr=qr.call(Object);var Jr=function(t){if(!w(t)||"[object Object]"!=_(t))return!1;var r=Nr(t);if(null===r)return!0;var e=Gr.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&qr.call(e)==Hr};var Kr=function(t){if(!w(t))return!1;var r=_(t);return"[object Error]"==r||"[object DOMException]"==r||"string"==typeof t.message&&"string"==typeof t.name&&!Jr(t)},Qr=Vr(function(t,r){try{return Mr(t,void 0,r)}catch(t){return Kr(t)?t:new Error(t)}});var Xr=function(t,r){var e=-1,n=r.length,o=t.length;for(;++e<n;)t[o+e]=r[e];return t},Yr=p?p.isConcatSpreadable:void 0;var Zr=function(t){return l(t)||kt(t)||!!(Yr&&t&&t[Yr])};var te=function t(r,e,n,o,u){var i=-1,c=r.length;n=n||Zr;u=u||[];for(;++i<c;){var a=r[i];0<e&&n(a)?1<e?t(a,e-1,n,o,u):Xr(u,a):o||(u[u.length]=a)}return u};var re=function(t){return null!=t&&t.length?te(t,1):[]};var ee=function(t,r){var e=-1,n=null==t?0:t.length;for(;++e<n&&!1!==r(t[e],e,t););return t};var ne=function(a){return function(t,r,e){for(var n=-1,o=Object(t),u=e(t),i=u.length;i--;){var c=u[a?i:++n];if(!1===r(o[c],c,o))break}return t}}();var oe=function(t,r){var e=-1,n=Array(t);for(;++e<t;)n[e]=r(e);return n};var ue=function(){return!1},ie=c(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e,u=o?s.Buffer:void 0,i=u?u.isBuffer:void 0,c=i||ue;t.exports=c}),ce={};ce["[object Float32Array]"]=ce["[object Float64Array]"]=ce["[object Int8Array]"]=ce["[object Int16Array]"]=ce["[object Int32Array]"]=ce["[object Uint8Array]"]=ce["[object Uint8ClampedArray]"]=ce["[object Uint16Array]"]=ce["[object Uint32Array]"]=!0,ce["[object Arguments]"]=ce["[object Array]"]=ce["[object ArrayBuffer]"]=ce["[object Boolean]"]=ce["[object DataView]"]=ce["[object Date]"]=ce["[object Error]"]=ce["[object Function]"]=ce["[object Map]"]=ce["[object Number]"]=ce["[object Object]"]=ce["[object RegExp]"]=ce["[object Set]"]=ce["[object String]"]=ce["[object WeakMap]"]=!1;var ae=function(t){return w(t)&&Ct(t.length)&&!!ce[_(t)]};var fe=function(r){return function(t){return r(t)}},le=c(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e,u=o&&a.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=i}),se=le&&le.isTypedArray,pe=se?fe(se):ae,ve=Object.prototype.hasOwnProperty;var ye=function(t,r){var e=l(t),n=!e&&kt(t),o=!e&&!n&&ie(t),u=!e&&!n&&!o&&pe(t),i=e||n||o||u,c=i?oe(t.length,String):[],a=c.length;for(var f in t)!r&&!ve.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Bt(f,a))||c.push(f);return c};var he=function(t){return sr(t)?ye(t):Jt(t)};var de=function(u,i){return function(t,r){if(null==t)return t;if(!sr(t))return u(t,r);for(var e=t.length,n=i?e:-1,o=Object(t);(i?n--:++n<e)&&!1!==r(o[n],n,o););return t}}(function(t,r){return t&&ne(t,r,he)});var be=function(t){return"function"==typeof t?t:Rr};var je=function(t,r){return(l(t)?ee:de)(t,be(r))};var ge=function(t){return w(t)&&"[object Map]"==lr(t)},me=le&&le.isMap,_e=me?fe(me):ge,we=Object.prototype.hasOwnProperty;var Oe=function(t){if(null==t)return!0;if(sr(t)&&(l(t)||"string"==typeof t||"function"==typeof t.splice||ie(t)||pe(t)||kt(t)))return!t.length;var r=lr(t);if("[object Map]"==r||"[object Set]"==r)return!t.size;if(Wt(t))return!Jt(t).length;for(var e in t)if(we.call(t,e))return!1;return!0};var Se=function(t,r){var e=-1,n=t.length;r=r||Array(n);for(;++e<n;)r[e]=t[e];return r};var Ae=function(t){var r,e=[];for(;!(r=t.next()).done;)e.push(r.value);return e};var xe=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Ee=function(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e};var Pe=function(t){return t.split("")},Te="\\ud800-\\udfff",ze="["+Te+"]",Fe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Me="\\ud83c[\\udffb-\\udfff]",Re="[^"+Te+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Ie="(?:"+Fe+"|"+Me+")?",Be="[\\ufe0e\\ufe0f]?",Ce="(?:\\u200d(?:"+[Re,$e,ke].join("|")+")"+Be+Ie+")*",De=Be+Ie+Ce,Ue="(?:"+[Re+Fe+"?",Fe,$e,ke,ze].join("|")+")",Ve=RegExp(Me+"(?="+Me+")|"+Ue+De,"g");var Ne=function(t){return t.match(Ve)||[]};var Le=function(t){return hr(t)?Ne(t):Pe(t)};var We=function(r,t){return St(t,function(t){return r[t]})};var qe=function(t){return null==t?[]:We(t,he(t))},Ge=p?p.iterator:void 0;var He=function(t){if(!t)return[];if(sr(t))return pr(t)?Le(t):Se(t);if(Ge&&t[Ge])return Ae(t[Ge]());var r=lr(t);return("[object Map]"==r?xe:"[object Set]"==r?Ee:qe)(t)},Je="Symbol"in t?Symbol("STATE"):"_state",Ke="Symbol"in t?Symbol("_value"):"_value",Qe="Symbol"in t?Symbol("SETTLED"):"_settled",Xe=function(t){return{enumerable:!1,get:Ir(t)}};function Ye(t){return pr(t)?t:t.name}function Ze(t){return pr(t)||t===Error||Kr(t.prototype)}function tn(t){return(this===Error||Kr(this))&&(this.name===t||tn.call(Object.getPrototypeOf(this.constructor),t))}function rn(t){return t&&!pr(t)&&P(t[Symbol.iterator])}function en(t){return t(this)}function nn(t,r,e){var n=re([r]);if(!n.some(en,t))throw new TypeError(e)}function on(t,r,e){var n;Vt(t,Je)||(Object.defineProperties(t,(o(n={},Ke,Xe(e)),o(n,Je,Xe(r)),n)),je(t[Qe],Qr),delete t[Qe])}function un(t,r,e,n){n===t?e(new TypeError("Can't resolve promise with itself.")):Kr(n)?e(n):E(n)?function(r,e,n,t){var o=!1;try{var u=function(t){if(o)return;o=true,un(r,e,n,t)},i=function(t){if(o)return;o=true,n(t)},c=t.then;if(!P(c))return e(t);c.call(t,u,i)}catch(t){o||n(t)}}(t,r,e,n):r(n)}return function(t){function r(t){return t()}var l=Nt,e=function(t){throw t},s=new t(r);function p(u){var i=this;new t(function(r,e){function n(t){on(i,1,t),r(t)}function o(t){on(i,2,t),e(t)}function t(t){un(i,n,o,t)}try{u.call(this,t,o,Nt)}catch(t){o(t)}}).catch(Nt)}return p.resolve=function(r){return new p(function(t){return t(r)})},p.reject=function(e){return new p(function(t,r){return r(e)})},p.defer=function(){var n={};return n.promise=new p(function(t,r,e){n.reject=r,n.resolve=t,Object.defineProperty(n,"notify",{value:e})}),n},p.timeout=function(t,r,e){var n=p.defer();return t.then(n.resolve,n.reject),setTimeout(n.reject,r,e||new Error("Promise timed out.")),n.promise},p.apply=p.fapply=function(r,e){return nn(r,P,"Function argument expected."),new p(function(t){return t(r.apply(void 0,u(e)))})},p.call=p.fcall=p.try=p.attempt=function(t){var r=Array.prototype.slice.call(arguments,1);return p.apply(t,r)},p.cast=p.when=function(t){return p.resolve(t)},p.isPromise=p.isPromiseLike=function(t){return Boolean(t instanceof p||t&&P(t.then))},p.race=t.race,p.delay=function(t,r){var e=p.defer();return setTimeout(e.resolve,t,r),e.promise},p.hash=p.settle=p.allSettled=function(t){nn(t,[E,_e,rn],"Object or Iterable argument expected.");var u=Fr(t),i=p.defer(),c=rn(t)?[]:{};return Oe(t)?p.resolve(c):(je(t,function(t,r){var e,n,o=p.cast(t);o.finally((e=r,n=o,function(){c[e]=n,0==--u&&i.resolve(c)}))}),i.promise)},p.some=function(t,n){nn(t,[E,_e,rn],"Object or Iterable argument expected."),nn(n,Ct,"Non-negative number argument expected.");var o=0,u=0,i=[],c=Fr(t),a=p.defer(),f=rn(t)?[]:{};function e(r,e){return function(t){e||Kr(t)?(u++,i[i.length]=t):(o++,f[r]=t),n<=o?a.resolve(f):c-n<u&&a.reject(1===u?i[0]:i)}}return c<n||0===n?n===c?p.resolve(f):p.reject(new Error("Expected number of promises not provided.")):(je(t,function(t,r){p.cast(t).then(e(r,!1),e(r,!0))}),a.promise)},p.all=function(t){return p.some(t,Fr(t))},p.any=function(t){return p.some(t,1)},p.unwrap=function(){return t},(p.config=Object.create(null)).setErrorHandler=function(t){nn(t,P,"Function argument expected."),e=t},p.config.setAsyncNotifier=function(t){nn(t,P,"Function argument expected."),l=t},((p.prototype=new t(r)).constructor=p).prototype.value=p.prototype.getValue=function(){return this[Ke]},p.prototype.isResolved=function(){return 1===this[Je]},p.prototype.isRejected=function(){return 2===this[Je]},p.prototype.isSettled=function(){return this.isResolved()||this.isRejected()},p.prototype.notify=function(){return p.resolve(this)},p.prototype.done=function(r){this.then(r,function(t){Qr(r,t),setTimeout(e,0,t)})},p.prototype.timeout=function(t,r){return p.timeout(this,t,r)},p.prototype.then=function(c,a){var f=this;return new p(function(t,r){var e,n,o,u=f,i=(e=function(){s.then(l);var t=u.getValue();if(u.isResolved())return P(c)?c(t):t;if(P(a))return a(t);throw t},n=t,o=r,function(){return s.then(e).then(n,o)});u.isSettled()?i():(u[Qe]=u[Qe]||[],u[Qe].push(i))})},p.prototype.else=p.prototype.catch=function(){var t=re(He(arguments)),r=t.filter(Ze).map(Ye),e=t.reverse().find(P)||Nt;return this.then(null,function(t){if(Oe(r)||r.some(tn,t))return e(t);throw t})},p.prototype.tap=function(e){return P(e)?this.then(function(t){var r=Ir(t);return p.call(e,t).then(r,r)}):p.resolve(this)},p.prototype.spread=function(r){return P(r)?this.then(function(t){return rn(t)?r.apply(void 0,u(t)):r.apply(void 0,arguments)}):p.resolve(this)},p.prototype.lastly=p.prototype.finally=function(r){function t(t){return p.call(r,t).then(Ir(t))}return P(r)?this.then(t,t):p.resolve(this)},p.prototype.unwrap=function(){var e=this;return new t(function(t,r){return e.then(t,r)})},p}}()}(t={exports:{}},t.exports),t.exports});
